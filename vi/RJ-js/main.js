var PAGE = {
    sidebarData: [
        {
            name: '锐捷网络品牌视觉规范', // 一级目录名称
            icon: 'side-icon-01.png', // 一级目录icon
            second: [
                {
                    name: '品牌基础核心元素', // 二级目录名称
                    f: '1/1',  // 三级目录对应图片部分路径
                    third: [
                        {
                            name: '锐捷策略与表现策略', // 三级目录名称
                            length: 12,   // 三级目录页数
                            target: '1-1-1'  // 菜单锚点目标id
                        },
                        {
                            name: 'logo',
                            length: 9,
                            target: '1-1-2'
                        },
                        {
                            name: '字体',
                            length: 2,
                            target: '1-1-3'
                        },
                        {
                            name: '色彩',
                            length: 4,
                            target: '1-1-4'
                        },
                        {
                            name: '栅格板式',
                            length: 3,
                            target: '1-1-5'
                        },
                        {
                            name: '影像风格',
                            length: 9,
                            target: '1-1-6'
                        },
                        {
                            name: '辅助图形',
                            length: 6,
                            target: '1-1-7'
                        },
                        {
                            name: '图标',
                            length: 4,
                            target: '1-1-8'
                        }

                    ]
                },
                {
                    name: '宣传品视觉规范',
                    f: '1/2',
                    third: [
                        {
                            name: '宣传总揽与基础栅格',
                            length: 4,
                            target: '1-2-1'
                        },
                        {
                            name: '品牌画册/刊物',
                            length: 7,
                            target: '1-2-2'
                        },
                        {
                            name: '产品/行业解决方案折页/集',
                            length: 5,
                            target: '1-2-3'
                        },
                        {
                            name: '产品/行业案例集',
                            length: 15,
                            target: '1-2-4'
                        },
                        {
                            name: '产品彩页',
                            length: 4,
                            target: '1-2-5'
                        },
                        {
                            name: '产品技术白皮书',
                            length: 5,
                            target: '1-2-6'
                        },
                        {
                            name: '产品索引',
                            length: 3,
                            target: '1-2-7'
                        },

                    ]
                },
                {
                    name: '活动视觉规范',
                    f: '1/3',
                    third: [
                        {
                            name: '大活动主视觉调性与构成',
                            length: 6,
                            target: '1-3-1'
                        },
                        {
                            name: '延展物料总揽',
                            length: 2,
                            target: '1-3-2'
                        },
                        {
                            name: '主视觉背板',
                            length: 3,
                            target: '1-3-3'
                        },
                        {
                            name: '指示牌',
                            length: 1,
                            target: '1-3-4'
                        },
                        {
                            name: '胸卡',
                            length: 2,
                            target: '1-3-5'
                        },
                        {
                            name: '欢迎贺卡',
                            length: 1,
                            target: '1-3-6'
                        },
                        {
                            name: '桌签',
                            length: 1,
                            target: '1-3-7'
                        },

                        {
                            name: '车证',
                            length: 1,
                            target: '1-3-8'
                        },
                        {
                            name: '接机牌',
                            length: 1,
                            target: '1-3-9'
                        },
                        {
                            name: '邀请函',
                            length: 3,
                            target: '1-3-10'
                        },
                        {
                            name: '电子邀请函',
                            length: 1,
                            target: '1-3-11'
                        },
                        {
                            name: '易拉宝',
                            length: 1,
                            target: '1-3-12'
                        },
                        {
                            name: '主持人手卡',
                            length: 1,
                            target: '1-3-13'
                        },
                        {
                            name: '抽奖箱',
                            length: 1,
                            target: '1-3-14'
                        },
                        {
                            name: '抽奖券',
                            length: 1,
                            target: '1-3-15'
                        },
                        {
                            name: '参观指南',
                            length: 1,
                            target: '1-3-16'
                        },
                        {
                            name: '展板',
                            length: 1,
                            target: '1-3-17'
                        },
                        {
                            name: 'ppt模板',
                            length: 1,
                            target: '1-3-18'
                        },
                        {
                            length: 1,
                            name: '串场ppt',
                            target: '1-3-19'
                        },
                        {
                            name: '话筒贴',
                            length: 1,
                            target: '1-3-20'
                        },
                        {
                            name: '台卡签到处',
                            length: 1,
                            target: '1-3-21'
                        },
                        {
                            name: '椅背贴',
                            length: 1,
                            target: '1-3-22'
                        },
                        {
                            name: '议程指示牌',
                            length: 1,
                            target: '1-3-23'
                        },

                        {
                            name: '会议h5邀请函',
                            length: 1,
                            target: '1-3-24'
                        },
                        {
                            name: '讲台贴',
                            length: 1,
                            target: '1-3-25'
                        },
                        {
                            name: '条幅',
                            length: 1,
                            target: '1-3-26'
                        },
                        {
                            name: '颁奖kt板',
                            length: 1,
                            target: '1-3-27'
                        },
                        {
                            name: '签到表',
                            length: 1,
                            target: '1-3-28'
                        },
                        {
                            name: '倒计时提醒牌',
                            length: 1,
                            target: '1-2-29'
                        },
                        {
                            name: '签到背板',
                            length: 1,
                            target: '1-3-30'
                        }
                    ]
                },
                {
                    name: '线上活动视觉规范',
                    f: '1/4',
                    third: [
                        {
                            name: '主视觉风格调性与元素拆分',
                            length: 4,
                            target: '1-4-1'
                        },
                        {
                            name: '主题微信海报',
                            length: 1,
                            target: '1-4-2'
                        },
                        {
                            name: '主题微信长图及邀请函',
                            length: 1,
                            target: '1-4-3'
                        },
                        {
                            name: 'pc端专题页设计',
                            length: 10,
                            target: '1-4-4'
                        },
                        {
                            name: '移动端专题页设计',
                            length: 2,
                            target: '1-4-5'
                        },
                        {
                            name: '微吼发布页面',
                            length: 1,
                            target: '1-4-6'
                        },
                        {
                            name: 'PPT模板',
                            length: 1,
                            target: '1-4-7'
                        }
                    ]
                },
                {
                    name: '办公视觉规范',
                    f: '1/5',
                    third: [
                        {name: '办公物料总揽', length: 1, target: '1-5-1'},
                        {name: '名片', length: 1, target: '1-5-2'},
                        {name: '工牌', length: 1, target: '1-5-3'},
                        {name: 'DL信封', length: 1, target: '1-5-4'},
                        {name: '5号信封', length: 1, target: '1-5-5'},
                        {name: '7号信封', length: 1, target: '1-5-6'},
                        {name: '9号信封', length: 1, target: '1-5-7'},
                        {name: '纸杯', length: 1, target: '1-5-8'},
                        {name: '邀请函', length: 1, target: '1-5-9'},
                        {name: '授权书', length: 1, target: '1-5-10'},
                        {name: '邮件签名', length: 1, target: '1-5-11'},
                        {name: 'WORD模板', length: 1, target: '1-5-12'},
                        {name: '行政立牌', length: 1, target: '1-5-13'},
                        {name: '桌面立牌', length: 1, target: '1-5-14'},
                        {name: '桌面贴签', length: 1, target: '1-5-15'},
                        {name: '制度管理', length: 1, target: '1-5-16'},
                        {name: 'EDM', length: 1, target: '1-5-17'},
                        {name: '外部采购', length: 1, target: '1-5-18'},
                        {name: '纸袋', length: 1, target: '1-5-19'},
                        {name: '帆布袋', length: 1, target: '1-5-20'},
                        {name: '透明手提袋', length: 1, target: '1-5-21'},
                        {name: '前台背景墙', length: 1, target: '1-5-22'},
                        {name: '玻璃门防撞条', length: 1, target: '1-5-23'},
                        {name: '警示标语', length: 1, target: '1-5-24'},
                        {name: '温馨提示', length: 1, target: '1-5-25'},
                        {name: '门牌/部门牌', length: 1, target: '1-5-26'},
                        {name: '6s海报', length: 1, target: '1-5-27'}
                    ]
                },
                {
                    name: '网站视觉规范',
                    f: '1/6',
                    third: [
                        {name: '网站页面基础元素与调性', length: 9, target: '1-6-1'},
                        {name: '首页', length: 13, target: '1-6-2'},
                        {name: '产品页面', length: 1, target: '1-6-3'},
                        {name: '产品方案详情页', length: 1, target: '1-6-4'},
                        {name: '行业线首页', length: 1, target: '1-6-5'},
                        {name: '行业方案详情页', length: 1, target: '1-6-6'}
                    ]
                },
                {
                    name: '移动海报视觉规范',
                    f: '1/7',
                    third: [
                        {name: '移动海报总览与界面尺寸', length: 3, target: '1-7-1'},
                        {name: '品牌案例海报', length: 1, target: '1-7-2'},
                        {name: '品牌服务海报', length: 1, target: '1-7-3'},
                        {name: '品牌业绩海报', length: 1, target: '1-7-4'},
                        {name: '产品品牌海报', length: 1, target: '1-7-5'},
                        {name: '产品介绍海报', length: 1, target: '1-7-6'},
                        {name: '产品方案海报', length: 1, target: '1-7-7'},
                        {name: '产品业绩海报', length: 1, target: '1-7-8'},
                        {name: '行业介绍海报', length: 1, target: '1-7-9'},
                        {name: '行业方案海报', length: 1, target: '1-7-10'},
                        {name: '行业案例海报', length: 1, target: '1-7-11'},
                        {name: '节日实践', length: 1, target: '1-7-12'},
                        {name: '活动海报', length: 1, target: '1-7-13'},
                        {name: '微信插图', length: 1, target: '1-7-14'},
                        {name: '裂变海报', length: 1, target: '1-7-15'},
                        {name: 'H5邀请函标注', length: 1, target: '1-7-16'}
                    ]
                },
                {
                    name: '媒体投放图片视觉规范',
                    f: '1/8',
                    third: [
                        {name: '媒体宣传图片类型总览', length: 1, target: '1-8-1'},
                        {name: 'pc端首页样式', length: 3, target: '1-8-2'},
                        {name: 'PC端样式', length: 4, target: '1-8-3'},
                        {name: '移动端样式', length: 4, target: '1-8-4'},
                        {name: '外部投放广告图画面调性', length: 1, target: '1-8-5'},
                        {name: '月度媒体投放广告', length: 5, target: '1-8-6'}
                    ]
                }
            ]
        },
        {
            name: 'Reyee品牌视觉规范',
            icon: 'side-icon-02.png',
            f: '2',
            second: []
        },
        {
            name: 'Ragial品牌视觉规范',
            icon: 'side-icon-03.png',
            f: '3',
            second: []
        }
    ],
    init: function() {
        console.time('cerate sidebar:')
        this.initSidebar();
        console.timeEnd('cerate sidebar:')
        this.initSidebarEvent();
        this.initOnNav();
    },
    initSidebar: function() {
        var sidebar = $('.sidebar-list');
        // 一级菜单
        var str = ''
        var d = this.sidebarData
        for (var i = 0, len = d.length; i < len; i++) {
            str += '<li class="sidebar-list-item">' +
                        '<img class="icon" src="./RJ-img/'+ d[i].icon +'" />' +
                        '<span class="sidebar-text">'+ d[i].name +'</span>' +
                        this.getSecondStr(d[i].second || []) +
                    '</li>'
        }
        sidebar.html(str)
    },
    getSecondStr: function(list) {
        if (!list.length) {
            return ''
        }
        // 二级菜单
        var str = '';
        for (var i = 0, len= list.length; i < len; i++) {
            str += '<li class="sub-list-item">' +
                        '<span class="sub-text">'+ list[i].name +'</span>' +
                        this.getThirdStr(list[i].third || [], list[i].f) +
                    '</li>';
        }
        return '<ul class="sub-list">' + str + '</ul>'
    },
    getThirdStr: function(list, f) {
        if (!list.length) {
            return ''
        }
        var imgContent = $('.img-content');
        // 三级菜单
        var str = '';
        var contentStr = ''
        for (var i = 0, len = list.length; i < len; i++) {
            str += '<li class="third-list-item">' +
                        '<a data-target="'+ list[i].target +'" href="#'+ list[i].target +'" class="third-text anchor-button">'+ list[i].name +'</a>' +
                    '</li>';
            contentStr += this.getImgList(list[i], f + '/' + (i + 1));
        }
        imgContent.append(contentStr);
        return '<ul class="third-list">' + str + '</ul>';
    },
    getImgList: function(item, f) {
        var str = '';
        for (var i = 1; i <= item.length; i++) {
            if (i === 1) {
                str +=  '<div class="item" id="'+ item.target +'">'+
                        '<img class="item-img" src="./RJ-img/'+f+'/'+ (i < 10 ? "0" + i : i) +'.jpg" alt="">'+
                    '</div>';
            } else {
                str +=  '<div class="item">'+
                        '<img class="item-img" src="./RJ-img/'+f+'/'+ (i < 10 ? "0" + i : i) +'.jpg" alt="">'+
                    '</div>';
            }
        }
        return str;
    },
    initSidebarEvent: function() {
        var _this = this;
        var scrollContent = $('#scrollContent');

        $('.sidebar-text').on('click', function() {
            var parent = $(this).parent('.sidebar-list-item');
            parent.siblings().removeClass('active');
            _this.setElStatus(parent);
        })

        $('.sub-text').on('click', function() {
            var parent = $(this).parent('.sub-list-item');
            _this.setElStatus(parent);
        })

        $('.third-text').on('click', function(e) {
            e = window.e || e;
            e.preventDefault();
            var parent = $(this).parent('.third-list-item');
            var parents = $(this).parents('.sub-list-item ');
            var pParents = $(this).parents('.sidebar-list-item');
            var currScroll = scrollContent.scrollTop();
            if (!parent.hasClass('active')) {
                parent.siblings().removeClass('active');
                parents.siblings().find('.third-list-item').removeClass('active');
                pParents.siblings().find('.third-list-item').removeClass('active');
                parent.addClass('active');

                if ($(this).parent('.third-list-item').hasClass('active')) {
                    var id = $(this).data('target');
                    var targetScroll = currScroll + $('#'+ id).offset().top - 140
                    scrollContent.animate({scrollTop: targetScroll + 'px'}, 100);
                }
            }
        })
    },
    setElStatus: function(parent) {
        if (parent.hasClass('active')) {
            parent.removeClass('active');
        } else {
            parent.addClass('active');
        }
    },
    initOnNav: function() {
         new Scrollspy({
            scrollElement: '#scrollContent',
            offset: 140,
            
            selector: '.anchor-button',
            activeCls: 'active',
            reachActive: function(el) {
                var currNav = $('.anchor-button[href="' + el + '"]');
                var parent = currNav.parent('.third-list-item');
                var parents = currNav.parents('.sub-list-item ');
                var pParents = currNav.parents('.sidebar-list-item');

                parent.addClass('active').siblings().removeClass('active');
                parents.addClass('active').siblings().find('.third-list-item').removeClass('active');
                pParents.addClass('active').siblings().find('.third-list-item').removeClass('active');
            }
        });
    }
}

$(function() {
    PAGE.init()
})